---
title: Configuration.compressMessage()
api: Configuration.compressMessage
---

## Description

Appends a **compressMessage** filter to the current pipeline layout.

A **compressMessage** filter compresses the bodies of [Messages](/reference/api/Message). Its input and output are both _Messages_.

<FilterDiagram
  name="compressMessage"
  input="Message"
  output="Message"
/>

The method, compression level used for compression are specified by the _options_ parameter. Currently supported compression methods are _deflate_, _gzip_.

### Options

There are options you can use in the _options_ parameter to configure compression method, compression level:

- _enabled_ - Toggle compression mode. Boolean flag either `true` or `false`. default is _true_.
- _method_ - Compression method to use. It need to be one of `deflate`, `gzip`, and `brotli`. default is _gzip_.
- _level_  - Compression level settings. It need to be one of `default`, `none`, `speed`, `best`. default is _default_.

## Syntax

``` js
pipy()
  .pipeline('example')
    .compressMessage({
      enabled: true,
      method: 'gzip',
      level: 'default'
    })
```

### Parameters

<Parameters/>

### Return value

<ReturnValue/>

## See Also

* [Configuration](/reference/api/Configuration)
* [compressHTTP()](/reference/api/Configuration/compressHTTP)
